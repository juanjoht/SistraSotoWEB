<div class="grid">
    <div class="col-12">
        <div class="card px-6 py-6">
            <p-toast></p-toast>

            <p-table #dt [value]="customers" [columns]="cols" responsiveLayout="scroll" [rows]="10"  [rows]="10" [paginator]="true" [rowsPerPageOptions]="[10,20,30]" [showCurrentPageReport]="true" currentPageReportTemplate="Mostrando {first} hasta {last} de {totalRecords} registros"  [rowHover]="true" dataKey="id">
                <ng-template pTemplate="caption">
                    <div class="flex flex-column md:flex-row md:justify-content-between md:align-items-center">
                        <h5 class="m-0">Clientes</h5>
                        <span class="block mt-2 md:mt-0">
                            <button pButton pRipple title="Adicionar nuevo cliente" icon="pi pi-plus" class="p-button-success mr-2" (click)="openNew()"></button>                            
                        </span>
                    </div>
                </ng-template>
                <ng-template pTemplate="header">
                    <tr>
                        <th pSortableColumn="docNumber">Número documento <p-sortIcon field="docNumber"></p-sortIcon></th>
                        <th pSortableColumn="name">Nombre <p-sortIcon field="name"></p-sortIcon></th>
                        <th pSortableColumn="phone">Teléfono <p-sortIcon field="phone"></p-sortIcon></th>
                        <th pSortableColumn="isActive">Estado <p-sortIcon field="isActive"></p-sortIcon></th>
                        <th></th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-customer>
                    <tr>
                        <td style="width:20%; min-width:15rem;"><span class="p-column-title">docNumber</span>
                            {{customer.docNumber}}
                        </td>
                        <td style="width:20%; min-width:15rem;">
                            <span class="p-column-title">Name</span>
                            {{customer.name}}
                        </td>
                        <td style="width:20%; min-width:15rem;">
                            <span class="p-column-title">phone</span>
                            {{customer.phone}}
                        </td>
                        <td style="width:20%; min-width:10rem;">
                            <span class="p-column-title">isActive</span>
                            {{customer.isActive}}
                        </td>
                        <td>
                            <div class="flex">
                                <button title="Editar" pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success mr-2"></button>
                                <button title="Ver" pButton pRipple icon="pi pi-eye" class="p-button-rounded p-button-warning"></button>
                            </div>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
        <p-dialog [(visible)]="customerDialog" [style]="{width: '1024px',height: '700px'}" [breakpoints]="{ '960px': '75vw' }"  [modal]="true" class="p-fluid">
            <ng-template pTemplate="header">
                <span class="text-xl font-bold text-center">Crear/Editar Cliente</span>
            </ng-template>
            <ng-template pTemplate="content">
                    <p-tabView>
                        <p-tabPanel header="Información Basica">
                            <div class="formgrid grid">
                                <div class="field col-12 sm:col-4">
                                    <label for="docTypeSelect" class="font-bold">Tipo Documento*</label>
                                    <p-dropdown id="docTypeSelect" [options]="documentTypes" [(ngModel)]="documentTypeSelected" optionLabel="name"></p-dropdown>
                                </div>
                                <div class="field col-12 sm:col-4">
                                    <label for="docNumberInput" class="font-bold">Número Documento*</label>
                                    <input id="docNumberInput" type="text" pInputText [(ngModel)]="customerBasic.docNumber" required autofocus [ngClass]="{'ng-invalid ng-dirty' : submittedBasic && !customerBasic.docNumber}" >
                                    <small class="ng-dirty ng-invalid" *ngIf="submittedBasic && !customerBasic.docNumber">Número Documento es requerido.</small>
                                </div>
                                <div class="field col-12 sm:col-4">
                                    <label for="nameInput" class="font-bold">Nombre*</label>
                                    <input id="nameInput" type="text" pInputText [(ngModel)]="customerBasic.name" required autofocus [ngClass]="{'ng-invalid ng-dirty' : submittedBasic && !customerBasic.name}" >
                                    <small class="ng-dirty ng-invalid" *ngIf="submittedBasic && !customerBasic.name">Nombre es requerido.</small>
                                </div>
                                <div class="field col-12 sm:col-4">
                                    <label for="phoneInput" class="font-bold">Teléfono*</label>
                                    <input id="phoneInput" type="text" pInputText  [(ngModel)]="customerBasic.phone" required autofocus [ngClass]="{'ng-invalid ng-dirty' : submittedBasic && !customerBasic.phone}">
                                    <small class="ng-dirty ng-invalid" *ngIf="submittedBasic && !customerBasic.phone">Teléfono es requerido.</small>
                                </div>
                                <div class="field col-12 sm:col-4">
                                    <label for="cellPhoneInput" class="font-bold">Celular</label>
                                    <input id="cellPhoneInput" type="text" pInputText >
                                </div>
                                <div class="field col-12 sm:col-4">
                                    <label for="emailInput" class="font-bold">Correo Electrónico</label>
                                    <input id="emailInput" type="text" pInputText>
                                </div>
                                <div class="field col-12 sm:col-4">
                                    <label for="DeptSelect" class="font-bold">Departamento*</label>
                                    <p-dropdown id="DeptSelect" [options]="depts" [(ngModel)]="deptSelected" optionLabel="name"></p-dropdown>
                                </div>
                                <div class="field col-12 sm:col-4">
                                    <label for="CitySelect" class="font-bold">Municipio*</label>
                                    <p-dropdown id="CitySelect" [options]="cities" [(ngModel)]="citySelected" optionLabel="name"></p-dropdown>
                                </div>
                                <div class="field col-12 sm:col-4">
                                    <label for="addressInput" class="font-bold">Dirección*</label>
                                    <input id="addressInput" type="text" pInputText [(ngModel)]="customerBasic.address" required autofocus [ngClass]="{'ng-invalid ng-dirty' : submittedBasic && !customerBasic.address}">
                                    <small class="ng-dirty ng-invalid" *ngIf="submittedBasic && !customerBasic.address">Dirección es requerido.</small>
                                </div>
                            </div>
                        </p-tabPanel>
                        <p-tabPanel [disabled]="commercialInfoTab" header="Información Comercial">
                            <div class="formgrid grid">
                                <div class="field col-12 sm:col-12">
                                    <label for="docTypeSelect" class="font-bold text-center">Cliente uno</label>
                                </div>
                                <div class="field col-12 sm:col-4">
                                    <label for="priorityGroupSelect" class="font-bold">Grupo de prioridad*</label>
                                    <p-dropdown id="priorityGroupSelect" [options]="priorityGroups" [(ngModel)]="priorityGroupSelected" optionLabel="name"></p-dropdown>
                                </div>
                                <div class="field col-12 sm:col-4">
                                    <label for="clientTipeSelect" class="font-bold">Tipo Cliente*</label>
                                    <p-dropdown id="clientTipeSelect" [options]="clientTypes" [(ngModel)]="clientTypeSelected" optionLabel="name"></p-dropdown>
                                </div>
                                <div class="field col-12 sm:col-4">
                                    <label for="ivaInput" class="font-bold">IVA*</label>
                                    <input id="ivaInput" type="text" pInputText [(ngModel)]="customerCommercial.iva" required autofocus [ngClass]="{'ng-invalid ng-dirty' : submittedCommercial && !customerCommercial.iva}" >
                                    <small class="ng-dirty ng-invalid" *ngIf="submittedCommercial && !customerCommercial.iva">Iva es requerido.</small>
                                </div>
                                <div class="field col-12 sm:col-4">
                                    <label for="assignedQuotaInput" class="font-bold">Cupo Asignado</label>
                                    <input id="assignedQuotaInput" type="text" pInputText [(ngModel)]="customerCommercial.assignedQuota"  >
                                </div>
                                <div class="field col-12 sm:col-4">
                                    <label for="usedQuotaInput" class="font-bold">Cupo Utilizado</label>
                                    <input id="usedQuotaInput" type="text" pInputText [(ngModel)]="customerCommercial.usedQuota"  >
                                </div>
                                <div class="field col-12 sm:col-4">
                                    <label for="availableQuotaInput" class="font-bold">Cupo Disponible</label>
                                    <input id="availableQuotaInput" type="text" pInputText [(ngModel)]="customerCommercial.availableQuota"  >
                                </div>
                                <div class="field col-12 sm:col-4">
                                    <label for="maturityDaysInput" class="font-bold">Días Vencimiento*</label>
                                    <input id="maturityDaysInput" type="text" pInputText [(ngModel)]="customerCommercial.maturityDays" required autofocus [ngClass]="{'ng-invalid ng-dirty' : submittedCommercial && !customerCommercial.maturityDays}"  >
                                    <small class="ng-dirty ng-invalid" *ngIf="submittedCommercial && !customerCommercial.maturityDays">Dias Vencimiento es requerido.</small>
                                </div>
                                <div class="field col-12 sm:col-4">
                                    <label for="additionalDaysInput" class="font-bold">Días Adicionales</label>
                                    <input id="additionalDaysInput" type="text" pInputText [(ngModel)]="customerCommercial.additionalDays"  >
                                </div>
                                <div class="field col-12 sm:col-4">
                                    <label for="delayDaysInput" class="font-bold">Dias de Mora</label>
                                    <input id="delayDaysInput" type="text" pInputText [(ngModel)]="customerCommercial.delayDays"  >
                                </div>
                                <div class="field col-12 sm:col-4">
                                    <label for="intermediationPercentageInput" class="font-bold">Porcentaje Intermediación*</label>
                                    <input id="intermediationPercentageInput" type="text" pInputText [(ngModel)]="customerCommercial.intermediationPercentage" required autofocus [ngClass]="{'ng-invalid ng-dirty' : submittedCommercial && !customerCommercial.intermediationPercentage}"  >
                                    <small class="ng-dirty ng-invalid" *ngIf="submittedCommercial && !customerCommercial.intermediationPercentage">Porcentaje Intermediación es requerido.</small>
                                </div>
                                <div class="field col-12 sm:col-4">
                                    <label for="measureUnitSelect" class="font-bold">Unidad de medida*</label>
                                    <p-dropdown id="measureUnitSelect" [options]="measureUnits" [(ngModel)]="measureUnitSelected" optionLabel="name"></p-dropdown>
                                </div>
                                <div class="field col-12 sm:col-4">
                                </div>
                            </div>
                        </p-tabPanel>
                        <p-tabPanel [disabled]="true" header="Obras">
                            <p>
                                At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa
                                qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus.
                            </p>
                        </p-tabPanel>
                        <p-tabPanel [disabled]="true" header="Transportadores">
                            <p>
                                At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa
                                qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus.
                            </p>
                        </p-tabPanel>
                        <p-tabPanel [disabled]="true" header="Tarifas Fletes">
                            <p>
                                At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa
                                qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus.
                            </p>
                        </p-tabPanel>
                    </p-tabView>
            </ng-template>

            <ng-template pTemplate="footer">
                <button pButton pRipple label="Guardar" icon="pi pi-check" class="p-button-text" (click)="saveCustomerBasic()"></button>
                <button pButton pRipple label="Cancelar" icon="pi pi-times" class="p-button-text" (click)="hideDialog()"></button>
            </ng-template>
        </p-dialog>
    </div>
</div>
